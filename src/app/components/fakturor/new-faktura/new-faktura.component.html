<div class="backdrop" (click)="onCancel()"></div>
<dialog open>
  <h2>Ny faktura</h2>
  <form (ngSubmit)="onSubmit()">
    <p>
      <label class="form-group required" for="customerName">Kund</label>
      <input
        type="text"
        id="customerName"
        name="customerName" [(ngModel)]="enteredCustomerName"
        minlength="2"
        maxlength="100"
        #customerName="ngModel"
      />

      @if (customerName.errors) {
        @switch (true) {
          @case (customerName.hasError('minlength')) {
            Kundnamn måste vara mellan 3 and 100 tecken.
          }
          @case (customerName.hasError('maxlength')) {
            Kundnamn måste vara mellan 3 and 100 tecken.
          }
        }
      }
    </p>

    <p>
      <label class="form-group required" for="dueDate">Förfallodatum</label>
      <input
        type="datetime-local"
        id="dueDate" name="dueDate"
             [ngModel]="enteredDueDate | date:'yyyy-MM-ddTHH:mm'"
             (ngModelChange)="handleDueDateChange($event)"
      />
    </p>

    <p>
      <label class="form-group required" for="description">Beskrivning</label>
      <textarea
        type= text
        id="description"
        rows="5"
        name="description" [(ngModel)]="enteredDescription"
        minlength="1"
        maxlength="255"
        #description="ngModel"
      >
      </textarea>

      @if (description.errors) {
        @switch (true) {
          @case (description.hasError('minlength')) {
            Beskrivning måste vara mellan 1 and 255 tecken.
          }
          @case (description.hasError('maxlength')) {
            Beskrivning måste vara mellan 1 and 255 tecken.
          }
        }
      }
    </p>

    <p>
      <label class="form-group required" for="quantity">Antal</label>
      <input
        type="number"
        id="quantity"
        name="quantity" [(ngModel)]="enteredQuantity"
        min="1"
        max="1000"
        #quantity="ngModel"
      />

      @if (quantity.errors) {
        @switch (true) {
          @case (quantity.hasError('min')) {
            Priset behöver vara mellan 0 and 1000000.
          }
          @case (quantity.hasError('max')) {
            Priset behöver vara mellan 0 and 1000000.
          }
        }
      }
    </p>

    <p>
      <label class="form-group required" for="price">Pris</label>
      <input
        type="number"
        id="price"
        name="price" [(ngModel)]="enteredPrice"
        min="1"
        max="1000000"
        #price="ngModel"
      />

      @if (price.errors) {
        @switch (true) {
          @case (price.hasError('min')) {
            Priset behöver vara mellan 0 and 1000000.
          }
          @case (price.hasError('max')) {
            Priset behöver vara mellan 0 and 1000000.
          }
        }
      }
    </p>

    <p>
      <label for="status">Status</label>
      <select name="status" id="status" [(ngModel)]="enteredStatus">
        <option value="PAID">Paid</option>
        <option value="OVERDUE">Overdue</option>
        <option value="SENT">Sent</option>
        <option value="DRAFT">Draft</option>
      </select>
    </p>

    <p class="actions">
      <button type="submit">Spara</button>
      <button type="button" (click)="onCancel()">Stäng</button>
    </p>
  </form>
</dialog>
